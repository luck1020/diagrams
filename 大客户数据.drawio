<mxfile host="app.diagrams.net" modified="2022-08-15T08:19:38.895Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36" etag="K2DaWVFsT5lRJfJosVC8" version="20.2.3" type="github">
  <diagram id="e685q4iBt2poqx3Ax8Bi" name="第 1 页">
    <mxGraphModel dx="2249" dy="1931" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-30" style="edgeStyle=orthogonalEdgeStyle;shape=flexArrow;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;dashPattern=1 1;" edge="1" parent="1" source="KX4ZCdjOSbOEscAZlVXC-28" target="KX4ZCdjOSbOEscAZlVXC-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-28" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#33FF33;" vertex="1" parent="1">
          <mxGeometry x="-60" y="-310" width="1340" height="800" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;strokeColor=none;" edge="1" parent="1" source="KX4ZCdjOSbOEscAZlVXC-1" target="KX4ZCdjOSbOEscAZlVXC-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;dashed=1;dashPattern=1 1;shape=link;" edge="1" parent="1" source="KX4ZCdjOSbOEscAZlVXC-1" target="KX4ZCdjOSbOEscAZlVXC-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-8" value="&lt;span style=&quot;font-size: 11px;&quot;&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;D.ID = M.ID&lt;/span&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="KX4ZCdjOSbOEscAZlVXC-7">
          <mxGeometry x="0.2" y="-2" relative="1" as="geometry">
            <mxPoint y="-2" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;dashed=1;dashPattern=1 1;shape=link;" edge="1" parent="1" source="KX4ZCdjOSbOEscAZlVXC-1" target="KX4ZCdjOSbOEscAZlVXC-5">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-24" value="AND D.ITEM_ID = B.ITEM_ID --出库批次.商品编号==客户订单商品明细.单品编号" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="KX4ZCdjOSbOEscAZlVXC-23">
          <mxGeometry x="-0.1339" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-1" value="WH_DELIVERYS_BATCH &lt;br&gt;D&lt;br&gt;--出库批次" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="100" y="80" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-2" value="WH_DELIVERYS&lt;br&gt;M&lt;br&gt;--出库表(用于发货)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="140" y="-60" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-3" value="CO&amp;nbsp;&lt;br&gt;C&lt;br&gt;--订单信息表" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="710" y="160" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-25" style="edgeStyle=orthogonalEdgeStyle;shape=link;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;dashed=1;dashPattern=1 1;" edge="1" parent="1" source="KX4ZCdjOSbOEscAZlVXC-5" target="KX4ZCdjOSbOEscAZlVXC-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-26" value="&lt;span style=&quot;font-size: 12px; text-align: left; background-color: rgb(248, 249, 250);&quot;&gt;AND C.ID = B.ID --订单信息表.主键==客户订单商品明细.主键&lt;/span&gt;" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="KX4ZCdjOSbOEscAZlVXC-25">
          <mxGeometry x="-0.3647" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-5" value="&lt;div&gt;&amp;nbsp;SELECT&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt; DISTINCT T.ID,--主键&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;&quot;&gt;		&lt;/span&gt;T.ITEM_ID,--单品编号&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;&quot;&gt;		&lt;/span&gt; T.SINGLE_PRICE --单个商品价格&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;&quot;&gt;		&lt;/span&gt; FROM CO_ITEMS T --客户订单商品明细&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;WHERE T.DELETE_FLAG = 0 --不删除的&lt;span style=&quot;background-color: initial;&quot;&gt;)&amp;nbsp;&lt;/span&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center;&quot;&gt;B&amp;nbsp;&lt;br&gt;&lt;/div&gt;&lt;div style=&quot;text-align: center;&quot;&gt;&lt;span style=&quot;text-align: left;&quot;&gt;客户订单商品明细&lt;/span&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="80" y="270" width="240" height="130" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;dashed=1;dashPattern=1 1;" edge="1" parent="1" source="KX4ZCdjOSbOEscAZlVXC-16" target="KX4ZCdjOSbOEscAZlVXC-2">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-16" value="AND M.TYPE_ = 1 --出库表.1,销售&lt;br&gt;&lt;br&gt;AND M.ENTITY_ID = C.ID --出库表.移仓、调拨单号=客户订单.编号&lt;br&gt;&lt;br&gt;&amp;nbsp;AND M.STATUS_ = 4 --出库表.4完成" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="75" y="-210" width="250" height="110" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=1 1;" edge="1" parent="1" source="KX4ZCdjOSbOEscAZlVXC-20" target="KX4ZCdjOSbOEscAZlVXC-3">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-20" value="&lt;div&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;AND C.STATUS_ IN ( 1, 4, 100 ) --1:生效,4:订单终止，100:完成&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;AND C.TYPE_ = 0 --0:正常销售&lt;/div&gt;&lt;div&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;AND ( M.APPROVE_TIME &amp;gt;= to_char( SYSDATE - 1, &#39;yyyy&#39; ) || &#39;-01-01&#39; AND M.APPROVE_TIME &amp;lt; to_char( SYSDATE, &#39;yyyy-mm-dd&#39; ) ) --审批时间&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;align=left;" vertex="1" parent="1">
          <mxGeometry x="330" y="-10" width="880" height="90" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-29" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;C.ID CO_ID,--订单信息表.主键&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;C.TYPE_,--订单信息表.类型&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;C.CUSTOMER_ID,--订单信息表.顾客编号&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;C.DEPT_SELL,--订单信息表.销售部门&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;D.ITEM_ID,--出库批次.商品编号&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;D.UNIT_ID_BASE AS UNIT_ID,--出库批次.计量单位编号&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;D.BATCH_NO,--出库批次.批次编号&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;D.QUANTITY_ACTUAL_BASE AS QUANTITY,--出库批次.计划发货数量&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;B.SINGLE_PRICE AS PRICE,--客户订单商品明细.单个商品价格&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;D.UNIT_COST AS COST,--出库批次.成本单价&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;SUBSTR( M.APPROVE_TIME, 1, 4 ) MONTH_YEAR,--审批时间年yyyy&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;SUBSTR( M.APPROVE_TIME, 1, 7 ) MONTH_DT,--审批时间月yyyy-mm&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;SUBSTR( M.APPROVE_TIME, 1, 10 ) co_DT,--审批时间日yyyy-mm-dd&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;to_number( SUBSTR( M.APPROVE_TIME, 9, 2 ) ) sale_day,--销售日&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;	&lt;/span&gt;M.REPOSITORY_ID --仓库ID&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#33FF33;" vertex="1" parent="1">
          <mxGeometry x="1200" y="650" width="580" height="250" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-42" style="edgeStyle=orthogonalEdgeStyle;shape=flexArrow;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;dashPattern=1 1;" edge="1" parent="1" source="KX4ZCdjOSbOEscAZlVXC-31" target="KX4ZCdjOSbOEscAZlVXC-29">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1685" y="570" />
              <mxPoint x="1490" y="570" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-31" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#33FF33;" vertex="1" parent="1">
          <mxGeometry x="1390" y="-90" width="590" height="240" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;dashPattern=1 1;shape=link;" edge="1" parent="1" source="KX4ZCdjOSbOEscAZlVXC-32" target="KX4ZCdjOSbOEscAZlVXC-33">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-37" value="D.ID = T.ID" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="KX4ZCdjOSbOEscAZlVXC-36">
          <mxGeometry x="0.1844" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-32" value="&lt;span style=&quot;&quot;&gt;				&lt;/span&gt;CO_BATCH&amp;nbsp;&lt;br&gt;D &lt;br&gt;--订单批次表" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1610" y="80" width="80" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-33" value="CO &lt;br&gt;T &lt;br&gt;--订单信息表" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="1840" y="80" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-39" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;dashPattern=1 1;" edge="1" parent="1" source="KX4ZCdjOSbOEscAZlVXC-38" target="KX4ZCdjOSbOEscAZlVXC-32">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="KX4ZCdjOSbOEscAZlVXC-38" value="&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;						&lt;/span&gt;AND T.TYPE_ = 1&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;						&lt;/span&gt;AND T.STATUS_ IN ( 1, 4, 100 )&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;						&lt;/span&gt;AND T.DELETE_FLAG = 0&amp;nbsp;&lt;/div&gt;&lt;div style=&quot;text-align: left;&quot;&gt;&lt;span style=&quot;&quot;&gt;						&lt;/span&gt;AND ( T.APPROVE_TIME &amp;gt;= to_char( SYSDATE - 1, &#39;yyyy&#39; ) || &#39;-01-01&#39; AND T.APPROVE_TIME &amp;lt; to_char( SYSDATE, &#39;yyyy-mm-dd&#39; ) )&amp;nbsp;&lt;/div&gt;" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#FFFFFF;" vertex="1" parent="1">
          <mxGeometry x="1465" y="-50" width="370" height="100" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
